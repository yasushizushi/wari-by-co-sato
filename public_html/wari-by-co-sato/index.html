<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WARI by Co-Sato</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="app-header">
        <h1>WARI by Co-Sato</h1>
        <p class="tagline">家族みんなで、やさしく割り勘。</p>
    </header>

    <main id="app">
        <section id="home-view" class="view">
            <div class="card">
                <h2>はじめての方へ</h2>
                <p>集まりの名前を入れると、グループが作られます。</p>
                <form id="create-group-form" class="form">
                    <label for="group-name">グループの名前</label>
                    <input type="text" id="group-name" name="name" placeholder="例: 5月ピクニック" required>
                    <button type="submit" class="primary-button">グループを作る</button>
                </form>
            </div>

            <div class="card">
                <h2>参加したい方へ</h2>
                <p>共有してもらったグループコードを入れてね。</p>
                <form id="join-group-form" class="form">
                    <label for="join-code">グループコード</label>
                    <input type="text" id="join-code" name="code" placeholder="例: A1B2C3" required>
                    <button type="submit" class="secondary-button">グループに入る</button>
                </form>
            </div>
        </section>

        <section id="group-view" class="view hidden">
            <button id="back-home" class="link-button">← ほかのグループを見る</button>
            <div class="card">
                <div class="group-header">
                    <h2 id="group-title"></h2>
                    <p id="group-code"></p>
                    <button id="share-link" class="secondary-button small">URLをコピー</button>
                </div>
                <div class="member-section">
                    <h3>参加しているみんな</h3>
                    <ul id="member-list" class="member-list"></ul>
                    <form id="add-member-form" class="form inline">
                        <div class="input-group">
                            <label for="member-name">お名前</label>
                            <input type="text" id="member-name" name="name" placeholder="例: さとし" required>
                        </div>
                        <div class="input-group">
                            <label for="member-role">区分</label>
                            <select id="member-role" name="role">
                                <option value="adult">おとな</option>
                                <option value="student">学生</option>
                                <option value="child">こども</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="member-ratio">負担の目安</label>
                            <input type="number" id="member-ratio" name="default_ratio" min="0.1" step="0.1" value="1" required>
                        </div>
                        <button type="submit" class="primary-button">メンバーを追加</button>
                    </form>
                </div>
            </div>

            <div class="card">
                <h3>支出を記録する</h3>
                <form id="add-item-form" class="form">
                    <label for="item-title">何に使ったか</label>
                    <input type="text" id="item-title" name="title" placeholder="例: お弁当代" required>

                    <label for="item-amount">金額（円）</label>
                    <input type="number" id="item-amount" name="amount" min="1" step="1" required>

                    <label for="payer-select">払った人</label>
                    <select id="payer-select" name="payer_member_id" required></select>

                    <div class="participant-box">
                        <p>参加した人（複数選べます）</p>
                        <div id="participant-checkboxes" class="checkbox-grid"></div>
                    </div>

                    <button type="submit" class="primary-button">この支出を記録</button>
                </form>
            </div>

            <div class="card">
                <h3>これまでの記録</h3>
                <div id="item-list" class="item-list"></div>
            </div>

            <div class="card">
                <h3>精算を確認する</h3>
                <p>今のところ誰がどれだけ受け取る／渡すのか確認できます。</p>
                <button id="calculate-settlement" class="highlight-button">精算をみる</button>
                <div id="settlement-result" class="settlement"></div>
            </div>
        </section>

        <section id="loading-view" class="view hidden">
            <div class="card centered">
                <p>少し待ってね…</p>
            </div>
        </section>

        <section id="message-bar" class="hidden"></section>
    </main>

    <footer class="app-footer">
        <p>© 2024 WARI by Co-Sato</p>
    </footer>

    <script src="app.js"></script>
</body>
</html>
